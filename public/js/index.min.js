function checkInput(e){e.each(function(){$(this).val($(this).val().trim()),$(this).val().length<3?$(this).addClass("error"):$(this).removeClass("error")})}function checkSelect(e){e.each(function(){$(this).find(".select__item-first").data("id")?$(this).removeClass("error"):$(this).addClass("error")})}function checkCheckBox(e){e.each(function(){$(this).find(".checkbox__native").is(":checked")?$(this).removeClass("error"):$(this).addClass("error")})}function checkMail(e){e.each(function(){isValidEmailAddress($(this).val())?$(this).removeClass("error"):$(this).addClass("error")})}function checkDate(e){var t=/^(0[1-9]|1[0-9]|2[0-9]|3[01])-(0[1-9]|1[012])-[0-9]{4}$/i;e.each(function(){t.test($(this).val())?$(this).removeClass("error"):$(this).addClass("error")})}function passCompare(e,t){var r=e.val().trim(),s=t.val().trim();r.length<6||s.length<6||r!=s?(e.addClass("error"),t.addClass("error")):(e.removeClass("error"),t.removeClass("error"))}function resetForm(e){e.find(".inputText").each(function(){$(this).val("").removeClass("error")}),e.find(".select").each(function(){var e=$(this).find(".select__item-first");e.removeClass("select__item-active").data("id",0).html(e.data("default")),e.siblings(".select__input").val(""),$(this).removeClass("error")}),e.find(".checkbox").each(function(){$(this).removeClass("error").find(".checkbox__native").prop("checked",!1)})}function isValidEmailAddress(e){return/^([a-z\d!#$%&'*+\-\/=?^_`{|}~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+(\.[a-z\d!#$%&'*+\-\/=?^_`{|}~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+)*|"((([ \t]*\r\n)?[ \t]+)?([\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|\\[\x01-\x09\x0b\x0c\x0d-\x7f\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))*(([ \t]*\r\n)?[ \t]+)?")@(([a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|[a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF][a-z\d\-._~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]*[a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])\.)+([a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|[a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF][a-z\d\-._~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]*[a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])\.?$/i.test(e)}function findInSelect(e,t){if(t=t.trim(),!e.length||!t.length)return!1;var r=!1;return e.find(".select__item").each(function(){t==$(this).text().trim()&&(r=!0)}),r}function resetSelect(e){e.removeClass("select-active error");var t=e.find(".select__item-first");t.data("id",0),t.html(t.data("default")),t.removeClass("select__item-active")}$(document).ready(function(){if($.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$(".hamburger").click(function(){$(this).toggleClass("is-active"),$(".navbar__navMob").slideToggle("fast")}),$("body").on("click",".select",function(e){$(this).siblings(".select-active").removeClass("select-active"),$(this).toggleClass("select-active");var t=$(e.target);t.siblings(".select__item-first").addClass("select__item-active").html(t.text()).data("id",t.data("id")).siblings(".select__input").val(t.data("id"))}),$(".reg__buttons").click(function(e){var t=$(this).data("stage"),r=t,s=$(e.target);if(s.hasClass("reg__next")){if(checkInput((i=$(this).siblings(".reg__stage-active")).find(".inputText")),checkSelect(i.find(".select")),1==r&&checkDate(i.find(".reg__dob")),3==r&&(checkMail(i.find(".reg__mail")),checkCheckBox(i.find(".checkbox")),passCompare(i.find(".reg__pass"),i.find(".reg__repass"))),0<i.find(".error").length)return;r<5&&r++}else{if(!s.hasClass("reg__prev"))return!1;1<r&&r--}switch($("#reg").find(".reg__stage"+t).removeClass("reg__stage-active").end().find(".reg__stage"+r).addClass("reg__stage-active"),r){case 1:$(this).find(".reg__prev").hide(),$(this).find(".reg__next").html("ДАЛІ");break;case 2:$(this).find(".reg__prev").show(),$(this).find(".reg__next").html("ДАЛІ");break;case 3:$(this).find(".reg__prev, .reg__next").show(),$(this).find(".reg__next").html("ЗАВЕРШИТИ"),$("#reg .form__footer").css("display","flex");break;case 4:var i=$(".reg__stage-active"),a=$(this);i.find(".reg__mess").html(""),a.find(".reg__prev").hide(),$.post("/register",$("#reg").serialize()).done(function(e){i.find(".reg__mess").html(e.message),"ok"==e.status?a.find(".reg__next").html("НА ГОЛОВНУ"):(a.find(".reg__prev").show(),a.find(".reg__next").hide())}).fail(function(e){i.find(".reg__mess").html("Помилка зв'язку з сервером.<br>Будь ласка, спробуйте пізніше."),a.find(".reg__next").hide(),a.find(".reg__prev").show()});break;case 5:$("#reg").hide(),$("#authForm").show()}$(this).data("stage",r)}),$(".forgot__buttons").click(function(e){var t=$(this).data("stage"),r=t,s=$(e.target);if(s.hasClass("forgot__next")){var i=$(this).siblings(".forgot__stage-active");switch(r){case 1:checkMail(i.find(".forgot__mail"));break;case 2:checkInput(i.find(".forgot__code"));break;case 3:passCompare(i.find(".forgot__pass"),i.find(".forgot__repass"))}if(0<i.find(".error").length)return;r<5&&r++}else{if(!s.hasClass("forgot__prev"))return!1;1<r&&r--}switch($("#forgotForm").find(".forgot__stage"+t).removeClass("forgot__stage-active").end().find(".forgot__stage"+r).addClass("forgot__stage-active"),r){case 1:$(this).find(".forgot__prev").hide(),$(this).find(".forgot__next").html("ДАЛІ").show();break;case 2:$(this).find(".forgot__prev").show();var a=$(this).find(".forgot__next").html("ДАЛІ");1==t&&(a.hide(),$.post("sendRestore",{email:i.find(".forgot__mail").val()}).done(function(){a.show()}).fail(function(){}));break;case 3:$(this).find(".forgot__prev, .forgot__next").show().filter(".forgot__next").html("ДАЛІ");break;case 4:i=$("#forgotForm");$(this).find(".forgot__next").html("ЗАВЕРШИТИ");var o=$(this);o.find(".forgot__prev").hide(),i.find(".forgot__mess").html(""),$.post("restore",i.serialize()).done(function(e){i.find(".forgot__mess").html(e.message),"err"==e.status&&(o.find(".forgot__next").hide(),o.find(".forgot__prev").show())}).fail(function(){});break;case 5:$("#forgotForm").hide(),$("#authForm").show()}$(this).data("stage",r)}),$(".reg__close, .forgot__auth").click(function(){$("#reg, #forgotForm").hide();var e=$("#authForm");e.find(".auth__mail, .auth__pass").val("").removeClass("error"),e.show()}),$(".reg__forgot, .auth__forgot").click(function(){$("#reg, #authForm").hide();var e=$("#forgotForm");e.find(".forgot__mail, .forgot__code, .forgot__pass, .forgot__repass").removeClass("error").val(""),e.find(".forgot__buttons").data("stage",1).siblings(".forgot__stage-active").removeClass("forgot__stage-active").end().siblings(".forgot__stage1").addClass("forgot__stage-active"),e.find(".forgot__prev").hide().siblings(".forgot__next").html("ДАЛІ").show(),e.show()}),$(".form__reg, .forgot__reg").click(function(){$("#authForm, #forgotForm").hide();var e=$("#reg");e.find(".reg__stage-active").removeClass("reg__stage-active"),e.find(".reg__stage1").addClass("reg__stage-active"),e.find(".reg__buttons").data("stage",1),e.find(".reg__prev").hide().siblings(".reg__next").html("ДАЛІ").show(),resetForm(e),e.show()}),$(".navbar__link, .navbar__linkMob").click(function(e){if(e.preventDefault(),$(this).is(".navbar__link")?$(this).siblings().removeClass("navbar__link-active").end().addClass("navbar__link-active"):($(".hamburger").removeClass("is-active"),$(this).parent().hide()),$(this).is(".link-home"))return $("#content").empty(),!1;var t=$(this).data(t);$.post(t,function(e){$("#content").html(e);history.pushState({},"Neosvita",t.url),$([document.documentElement,document.body]).animate({scrollTop:$("#content").offset().top},1e3)})}),$(".auth__next").click(function(e){var t=$("#authForm");checkInput(t.find(".inputText")),checkMail(t.find(".auth__mail")),0<t.find(".error").length||$.post("/login",t.serialize()).done(function(e){"ok"==e.status?window.location.href="/":"err"==e.status&&(e.email||t.find(".auth__mail").addClass("error"),e.pass||t.find(".auth__pass").addClass("error"))}).fail(function(){window.location.href="/"})}),$("#reg, #authForm, #forgotForm").submit(function(e){e.preventDefault()}),$(".navbar__logout, .navbar__logoutMob").click(function(e){$.post("/logout").done(function(e){"ok"==e&&(window.location.href="/")})}),0<$(".reg__dob").length)new Cleave(".reg__dob",{date:!0,delimiter:"-",datePattern:["d","m","Y"]})});