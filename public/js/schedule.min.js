function getGroupSchedule(){var e=$(".searchBar");if(checkInput(e.find(".searchBar__group")),checkSelect(e.find(".searchBar__institution")),e.find(".error").length<1){var i={};i.group=e.find(".searchBar__group").val(),i.institution=e.find(".searchBar__institution .select__item-first").data("id"),i.week=$(".schedule__week .select__item-first").data("id"),getSchedule(i)}}function getSchedule(s){$.post("getSchedule",JSON.stringify(s)).done(function(e){if("err"!=e)if($("#groupSchedule").html(e).find(".groupNotFound").length){(i=$("#currentGroupCode")).is(".getSwitch")||i.html(s.group)}else{var i;if((i=$("#currentGroupCode")).is(".getSwitch")){var t=i.parent().siblings(".groupSwitcher");t.length&&findInSelect(t,s.group)&&(i.html(s.group),t.find(".select__item-first").html(s.group).addClass("select__item-active"))}else i.html(s.group);i.siblings(".institutionName").html($("#institutionName").val())}}).fail(function(){alert("Виникла помилка.")})}function groupSwitcherSchedule(e){var i=$(e.target);i.is(".select__item")&&!i.is(".select__item-first")&&getSchedule({group:i.text(),institution:i.data("id"),week:$(".schedule__week .select__item-first").data("id")})}$(document).ready(function(){$(".schedule__switch").click(function(e){var i=$(e.target);if(i.is(".schedule__switchCase")){i.siblings().removeClass("active").end().addClass("active");var t=$("."+$(this).data("table"));t.find(".visible").removeClass("visible"),t.find("."+i.data("col")).addClass("visible")}}),$(".schedule__week").click(function(e){var i=$(e.target);if(i.is(".select__item")&&!i.is(".select__item-first")){var t=$(".schedule__search");if(checkInput(t.find(".searchBar__group")),checkSelect(t.find(".searchBar__institution")),!t.find(".error").length)getSchedule({group:t.find(".searchBar__group").val().trim(),institution:t.find(".searchBar__institution .select__item-first").data("id"),week:i.data("id")});scrollTo(".schedule__search",1e3)}}),$(".schedule__editEdit").click(function(){$(this).hide().siblings(".schedule__week").hide().siblings(".schedule__editCancel, .schedule__editSubmit").show(),$(".scheduleDayCard .scheduleCard__disciplineName").each(function(){$(this).hide().siblings(".scheduleDiscipline__edit").val($(this).text()).show()}),$(".scheduleCard__disciplineData").each(function(){$(this).hide().siblings(".scheduleLocation__edit").val($(this).text()).show()}),$(".scheduleTimeCard__time").each(function(){$(this).hide().siblings(".scheduleTimeCard__edit").val($(this).text()).show()})}),$(".scheduleTimeCard__edit").focus(function(){$(this).addClass("edited"),$(this).mask("99:99 - 99:99",{autoclear:!1})}).blur(function(){$(this).removeClass("edited")}),$(".schedule__editCancel").click(function(){$(this).hide().siblings(".schedule__week, .schedule__editEdit").show().siblings(".schedule__editSubmit").hide(),$(".scheduleTimeCard__edit").each(function(){$(this).hide().siblings(".scheduleTimeCard__time").show()}),$(".scheduleDayCard .scheduleCard__disciplineName").each(function(){$(this).show().siblings(".scheduleDiscipline__edit").hide()}),$(".scheduleCard__disciplineData").each(function(){$(this).show().siblings(".scheduleLocation__edit").hide()})}),$(".schedule__editSubmit").click(function(){var i=new Array;$(".scheduleDayCard").each(function(){var t=new Array,s=!1;if($(this).find(".scheduleCard__discipline").each(function(){var e=$(this).find(".scheduleDiscipline__edit").val().trim(),i=$(this).find(".scheduleLocation__edit").val().trim();s||$(this).find(".scheduleCard__disciplineName").html()==e&&$(this).find(".scheduleCard__disciplineData").html()==i||(s=!0),t[$(this).data("id")]=[e,i]}),s){var e={};e.id=$(this).data("id"),e.data=t,i.push(e)}});var t=new Array;$(".scheduleTimeCard__edit").each(function(){var e=$(this).siblings(".scheduleTimeCard__time").text();$(this).val()!=e&&t.push([$(this).data("id"),$(this).val()])});var e={};0<i.length&&(e.group=$("#groupSchedule > .schedule__label").data("group"),e.schedule=i),0<t.length&&(e.timeSchedule=t),$.isEmptyObject(e)||$.post("scheduleUpdate",JSON.stringify(e)).done(function(e){"ok"==e&&($(".schedule__editSubmit, .schedule__editCancel").hide().siblings(".schedule__week, .schedule__editEdit").show(),$(".scheduleTimeCard__edit").each(function(){$(this).hide().siblings(".scheduleTimeCard__time").html($(this).val()).show()}),$(".scheduleDiscipline__edit").each(function(){$(this).hide().siblings(".scheduleCard__disciplineName").html($(this).val()).show()}),$(".scheduleLocation__edit").each(function(){$(this).hide().siblings(".scheduleCard__disciplineData").html($(this).val()).show()}))}).fail(function(){alert("Виникла помилка. Дані ще не введено.")})})});